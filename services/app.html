<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Weekly Task Manager</title>
  <link rel="stylesheet" href="/style/taskstyle.css" />
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
  <script type="module" src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>
</head>
<body>
  <header class="app-header">
  <h1>Weekly Planner</h1>
  <div>
    <button id="themeToggle" onclick="toggleTheme()">ğŸŒ— Theme</button>
    <button onclick="logout()" class="logout-btn">Logout</button>
  </div>
</header>


  <section class="calendar-controls">
    <button onclick="changeWeek(-1)">&#8592; Prev</button>
    <span id="weekLabel">This Week</span>
    <button onclick="changeWeek(1)">Next &#8594;</button>
  </section>

  <div class="week-grid" id="weekGrid"></div>

  <!-- Task Popup -->
  <div id="taskPopup" class="popup hidden">
  <h3 id="popupTitle">Add/Edit Task</h3>
  <textarea id="taskTitle" placeholder="Task Details"></textarea>
  <label>Color: <input type="color" id="taskColor" class="popup-input"></label>
  <label>Status:
    <select id="taskStatus" class="popup-input">
      <option>Planned</option>
      <option>In Progress</option>
      <option>Done</option>
    </select>
  </label>
  <label>Priority:
    <select id="taskPriority" class="popup-input">
      <option>Low</option>
      <option>Medium</option>
      <option>High</option>
    </select>
  </label>
  <div class="popup-buttons">
   <div class="popup-buttons" style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
  <button onclick="saveTask()">Save</button>
  <button onclick="closePopup()">Cancel</button>
  <button onclick="deleteTask()">ğŸ—‘ï¸ Delete</button>
  <!-- <button onclick="exportToCalendar()">ğŸ“… Calendar</button> -->
  <button onclick="exportToGoogleCalendar()">ğŸ—“ï¸ Google Calendar</button>
  <button onclick="exportToEmail()">ğŸ“§ Email</button>
  <button onclick="exportToJson()">ğŸ’¾ Download</button>
  <button id="popupCloseX" style="position: absolute; top: 5px; right: 10px; border: none; background: none; font-size: 1.25rem;">Ã—</button>

</div>

  </div>
</div>


  <script type="module" src="/firebase-config.js"></script>
  <script type="module" src="/script/app.js"></script>
  <script>
    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      document.getElementById("themeToggle").textContent = isDark ? "â˜€ï¸ Theme" : "ğŸŒ— Theme";
    }

    const currentTheme = localStorage.getItem("theme") || "light";
    if (currentTheme === "dark") document.body.classList.add("dark");
    document.getElementById("themeToggle").textContent = currentTheme === "dark" ? "â˜€ï¸ Theme" : "ğŸŒ— Theme";
  </script>
</body>
</html>
